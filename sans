-- åŠ è½½ Rayfield åº“
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- åˆ›å»ºä¸»çª—å£
local Window = Rayfield:CreateWindow({
    Name = "ç»´åº¦èåˆ 1.0 (ä¼˜åŒ–ç‰ˆ)",
    LoadingTitle = "ç»´åº¦èåˆ",
    LoadingSubtitle = "åŠ è½½ä¸­...",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "Aimbotgui",
        FileName = "DimensionFusion"
    },
    Discord = {
        Enabled = false,
        Invite = "noinvite",
        RememberJoins = true
    },
    KeySystem = false,
    KeySettings = {
        Title = "Key System",
        Subtitle = "Input your key here",
        Note = "Join the discord for a key!",
        FileName = "Key",
        SaveKey = true,
        GrabKeyFromSite = false,
        Key = "hello"
    }
})

-- æœåŠ¡å¼•ç”¨
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")

-- ==================== å·¥å…·å‡½æ•° ====================
local Utils = {}

-- è·å–ç©å®¶åˆ—è¡¨
function Utils.GetPlayerNames()
    local names = {}
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            table.insert(names, player.Name)
        end
    end
    return names
end

-- ä¼¤å®³èƒ½åŠ›åˆ¤æ–­
function Utils.CanDealDamage(player)
    if not player.Character then return false end
    
    -- æ£€æŸ¥å±æ€§
    for name, value in pairs(player:GetAttributes()) do
        local lname = name:lower()
        if lname:find("damage") or lname:find("attack") or lname:find("killer") or lname:find("power") or lname:find("hit") then
            if value == true or tostring(value) == "true" or tonumber(value) == 1 then
                return true
            end
        end
    end
    
    -- æ£€æŸ¥è§’è‰²å­é¡¹
    for _, obj in pairs(player.Character:GetDescendants()) do
        local lname = obj.Name:lower()
        if lname:find("damage") or lname:find("attack") or lname:find("killer") or lname:find("power") or lname:find("hit") then
            if (obj:IsA("BoolValue") and obj.Value == true) 
            or (obj:IsA("StringValue") and tostring(obj.Value):lower():find("true"))
            or (obj:IsA("NumberValue") and obj.Value > 0) then
                return true
            end
        end
    end
    return false
end

-- å®‰å…¨è°ƒç”¨è¿œç¨‹äº‹ä»¶
function Utils.SafeFireRemote(remotePath, args, timeout)
    timeout = timeout or 9e9
    local current = ReplicatedStorage
    for _, name in ipairs(remotePath) do
        current = current:WaitForChild(name, timeout)
        if not current then return false end
    end
    pcall(function()
        current:FireServer(unpack(args or {}))
    end)
    return true
end

-- åˆ›å»ºè‡ªé€‚åº”è¾“å…¥
function Utils.CreateInput(tab, config)
    return tab:CreateInput(config)
end

-- æ›´æ–°è‡ªé€‚åº”è¾“å…¥
function Utils.SetInput(input, value)
    if input and input.Set then
        input:Set(value)
    end
end

-- åˆ›å»ºé¢œè‰²é€‰æ‹©å™¨
function Utils.CreateColorPicker(tab, config)
    return tab:CreateColorPicker(config)
end

-- æ›´æ–°é¢œè‰²é€‰æ‹©å™¨
function Utils.SetColorPicker(colorPicker, color)
    if colorPicker and colorPicker.Set then
        colorPicker:Set(color)
    end
end

-- åˆ›å»ºæ»‘å—
function Utils.CreateSlider(tab, config)
    return tab:CreateSlider(config)
end

-- åˆ›å»ºæ®µè½
function Utils.CreateParagraph(tab, config)
    return tab:CreateParagraph(config)
end

-- æ›´æ–°æ®µè½
function Utils.SetParagraph(paragraph, config)
    if paragraph and paragraph.Set then
        paragraph:Set(config)
    end
end

-- ==================== å¾ªç¯ä»»åŠ¡ç®¡ç†å™¨ ====================
local TaskManager = {
    activeTasks = {}
}

function TaskManager.StartTask(name, callback)
    if TaskManager.activeTasks[name] then
        task.cancel(TaskManager.activeTasks[name])
    end
    TaskManager.activeTasks[name] = task.spawn(callback)
end

function TaskManager.StopTask(name)
    if TaskManager.activeTasks[name] then
        task.cancel(TaskManager.activeTasks[name])
        TaskManager.activeTasks[name] = nil
    end
end

function TaskManager.StopAllTasks()
    for name, task in pairs(TaskManager.activeTasks) do
        task.cancel(task)
        TaskManager.activeTasks[name] = nil
    end
end

-- ==================== ç©å®¶é€‰æ‹©ç®¡ç†å™¨ ====================
local PlayerSelector = {
    targets = {}
}

function PlayerSelector.CreateDropdown(tab, name, flag, callback)
    local dropdown = tab:CreateDropdown({
        Name = name,
        Options = Utils.GetPlayerNames(),
        CurrentOption = Utils.GetPlayerNames()[1] or "æ— ",
        MultipleOptions = false,
        Flag = flag,
        Callback = callback
    })
    
    return dropdown
end

function PlayerSelector.RefreshDropdown(dropdown)
    if dropdown and dropdown.Refresh then
        dropdown:Refresh(Utils.GetPlayerNames())
    end
end

function PlayerSelector.SetupPlayerTracking(dropdowns)
    local function refreshAll()
        for _, dropdown in ipairs(dropdowns) do
            PlayerSelector.RefreshDropdown(dropdown)
        end
    end
    
    Players.PlayerAdded:Connect(refreshAll)
    Players.PlayerRemoving:Connect(refreshAll)
end

-- ==================== 1. åŸºç¡€åŠŸèƒ½æ ‡ç­¾é¡µ ====================
local BasicTab = Window:CreateTab("åŸºç¡€åŠŸèƒ½", 4483362458)

-- é£è¡Œæ§åˆ¶
BasicTab:CreateSection("å›¢é˜Ÿæ§åˆ¶")
BasicTab:CreateButton({
    Name = "é£è¡Œæ§åˆ¶",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/mciklw/mciklwscript/refs/heads/main/flyvthree"))()
        print("[ç»´åº¦èåˆ] è§¦å‘é£è¡Œæ§åˆ¶åŠŸèƒ½")
    end
})

-- é€è§†
BasicTab:CreateButton({
    Name = "é€è§†",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/hfhfsfx/cream/main/love"))()
        print("[ç»´åº¦èåˆ] è§¦å‘é€è§†åŠŸèƒ½")
    end
})

-- æŠ€èƒ½æ— å†·å´
BasicTab:CreateButton({
    Name = "æŠ€èƒ½æ— å†·å´(no cd)",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/hfhfsfx/cream/main/no%20cd"))()
        print("[ç»´åº¦èåˆ] è§¦å‘æŠ€èƒ½æ— å†·å´åŠŸèƒ½")
    end
})

-- ä¼ é€åŠŸèƒ½
local teleportDropdown = PlayerSelector.CreateDropdown(BasicTab, "é€‰æ‹©ä¼ é€ç›®æ ‡ç©å®¶", "TeleportTargetDropdown", function(Options)
    PlayerSelector.targets.teleport = Players:FindFirstChild(Options[1])
    print("[ç»´åº¦èåˆ] ä¼ é€ç›®æ ‡å·²é€‰ä¸­ï¼š" .. (PlayerSelector.targets.teleport and PlayerSelector.targets.teleport.Name or "æ— "))
end)

BasicTab:CreateButton({
    Name = "ä¼ é€è‡³é€‰ä¸­ç©å®¶",
    Callback = function()
        local target = PlayerSelector.targets.teleport
        if not target then
            warn("[ç»´åº¦èåˆ] è¯·å…ˆä»ä¸‹æ‹‰æ¡†é€‰æ‹©ä¼ é€ç›®æ ‡ï¼")
            return
        end

        if target == LocalPlayer then
            warn("[ç»´åº¦èåˆ] ä¸èƒ½ä¼ é€åˆ°è‡ªå·±ï¼")
            return
        end

        if target.Character then
            Utils.SafeFireRemote({"PlayerRemoteEvents", "Vanilla", "Grab_Teamtes"}, {target.Character, "grab"})
            print("[ç»´åº¦èåˆ] å·²ä¼ é€è‡³ç©å®¶ï¼š" .. target.Name)
        else
            warn("[ç»´åº¦èåˆ] ç›®æ ‡ç©å®¶ " .. target.Name .. " æ— è§’è‰²ï¼Œæ— æ³•ä¼ é€")
        end
    end
})

-- ä¼ é€å…¨éƒ¨äºº
BasicTab:CreateButton({
    Name = "ä¼ é€å…¨éƒ¨äºº",
    Callback = function()
        for _, player in ipairs(Players:GetPlayers()) do
            if player.Character then
                Utils.SafeFireRemote({"PlayerRemoteEvents", "Vanilla", "Grab_Teamtes"}, {player.Character, "grab"})
            end
        end
        print("[ç»´åº¦èåˆ] è§¦å‘ä¼ é€å…¨éƒ¨äººåŠŸèƒ½")
    end
})

-- å¤æ´»æ‰€æœ‰äºº
BasicTab:CreateButton({
    Name = "å¤æ´»æ‰€æœ‰äºº",
    Callback = function()
        for _, player in ipairs(Players:GetPlayers()) do
            if player and player:IsDescendantOf(Players) then
                Utils.SafeFireRemote({"Remotes", "Character", "reviveEvent"}, {player})
            end
        end
        print("[ç»´åº¦èåˆ] å¤æ´»æ‰€æœ‰äººåŠŸèƒ½æ‰§è¡Œå®Œæˆ")
    end
})

-- é€ƒè„±åŠŸèƒ½
BasicTab:CreateButton({
    Name = "é€ƒè„±",
    Callback = function()
        if LocalPlayer.PlayerGui.maingui.ModuleStarter.Player.EscapeControl.EscapeEvent then
            LocalPlayer.PlayerGui.maingui.ModuleStarter.Player.EscapeControl.EscapeEvent:FireServer()
            print("[ç»´åº¦èåˆ] è§¦å‘é€ƒè„±åŠŸèƒ½")
        end
    end
})

-- ==================== 2. æˆ˜æ–—åŠŸèƒ½æ ‡ç­¾é¡µ ====================
local CombatTab = Window:CreateTab("æˆ˜æ–—/å¹²æ‰°", 4483362458)

-- ä¼¤å®³åŠŸèƒ½
CombatTab:CreateSection("ä¼¤å®³")

-- å…¨ä½“ä¼¤å®³(35hp)
CombatTab:CreateButton({
    Name = "å…¨ä½“ä¼¤å®³(35hp)",
    Callback = function()
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character and not Utils.CanDealDamage(player) then
                Utils.SafeFireRemote({"PlayerRemoteEvents", "ExeRemote", "Damage"}, {player.Character})
            end
        end
        print("[ç»´åº¦èåˆ] å…¨ä½“ä¼¤å®³(35hp)åŠŸèƒ½æ‰§è¡Œå®Œæˆ")
    end
})

-- é€‰äººä¼¤å®³
local singleDamageDropdown = PlayerSelector.CreateDropdown(CombatTab, "é€‰æ‹©å•ä¸ªä¼¤å®³ç›®æ ‡", "SingleDamageTargetDropdown", function(Options)
    PlayerSelector.targets.singleDamage = Players:FindFirstChild(Options[1])
end)

CombatTab:CreateButton({
    Name = "é€‰äººä¼¤å®³35hp(åªèƒ½å¯¹å¹¸å­˜è€…é€ æˆä¼¤å®³)",
    Callback = function()
        local target = PlayerSelector.targets.singleDamage
        if not target then
            warn("[ç»´åº¦èåˆ] è¯·å…ˆä»ä¸‹æ‹‰æ¡†é€‰æ‹©ä¼¤å®³ç›®æ ‡ï¼")
            return
        end

        if target == LocalPlayer then
            warn("[ç»´åº¦èåˆ] ä¸èƒ½å¯¹è‡ªå·±é€ æˆä¼¤å®³ï¼")
            return
        end

        if target.Character and not Utils.CanDealDamage(target) then
            Utils.SafeFireRemote({"PlayerRemoteEvents", "ExeRemote", "Damage"}, {target.Character})
            print("[ç»´åº¦èåˆ] å·²å¯¹ç©å®¶ " .. target.Name .. " é€ æˆ35hpä¼¤å®³")
        else
            warn("[ç»´åº¦èåˆ] ç›®æ ‡ç©å®¶ " .. target.Name .. " å…·æœ‰ä¼¤å®³èƒ½åŠ›æˆ–æ— è§’è‰²")
        end
    end
})

-- ç§’æ€åŠŸèƒ½
CombatTab:CreateSection("ç§’æ€")

CombatTab:CreateToggle({
    Name = "ã€å¼€å¯/å…³é—­ç§’æ€ã€",
    CurrentValue = false,
    Flag = "KillToggle",
    Callback = function(Value)
        if Value then
            TaskManager.StartTask("killAll", function()
                while TaskManager.activeTasks["killAll"] do
                    task.wait()
                    for _, player in ipairs(Players:GetPlayers()) do
                        if player ~= LocalPlayer and player.Character then
                            Utils.SafeFireRemote({"PlayerRemoteEvents", "Frenzy"}, {player.Character})
                        end
                    end
                end
            end)
        else
            TaskManager.StopTask("killAll")
        end
    end
})

-- é€‰äººç§’æ€
local killDropdown = PlayerSelector.CreateDropdown(CombatTab, "é€‰æ‹©ç§’æ€ç›®æ ‡ç©å®¶", "TargetKillDropdown", function(Options)
    PlayerSelector.targets.kill = Players:FindFirstChild(Options[1])
end)

CombatTab:CreateToggle({
    Name = "ã€å¼€å¯/å…³é—­é€‰äººç§’æ€ã€",
    CurrentValue = false,
    Flag = "TargetKillToggle",
    Callback = function(Value)
        if Value then
            local target = PlayerSelector.targets.kill
            if not target or target == LocalPlayer then
                warn("[ç»´åº¦èåˆ] è¯·é€‰æ‹©æœ‰æ•ˆç›®æ ‡ï¼")
                return
            end
            
            TaskManager.StartTask("targetKill", function()
                while TaskManager.activeTasks["targetKill"] and target and target:IsDescendantOf(Players) do
                    task.wait()
                    if target.Character then
                        Utils.SafeFireRemote({"PlayerRemoteEvents", "Frenzy"}, {target.Character})
                    end
                end
                TaskManager.StopTask("targetKill")
            end)
        else
            TaskManager.StopTask("targetKill")
        end
    end
})

-- å®šäººåŠŸèƒ½
CombatTab:CreateSection("å®šäºº")

CombatTab:CreateToggle({
    Name = "ã€å¼€å¯/å…³é—­å®šäºº(å…¨éƒ¨äººï¼Œä¸åŒ…æ‹¬è‡ªå·±)ã€",
    CurrentValue = false,
    Flag = "HomingAttackToggle",
    Callback = function(Value)
        if Value then
            TaskManager.StartTask("homingAll", function()
                while TaskManager.activeTasks["homingAll"] do
                    task.wait()
                    for _, player in ipairs(Players:GetPlayers()) do
                        if player ~= LocalPlayer and player.Character then
                            Utils.SafeFireRemote({"PlayerRemoteEvents", "HomingAttack"}, {player.Character})
                        end
                    end
                end
            end)
        else
            TaskManager.StopTask("homingAll")
        end
    end
})

-- è·³æ€åŠŸèƒ½
CombatTab:CreateSection("è·³æ€å’Œç—…æ¯’")

CombatTab:CreateToggle({
    Name = "ã€å¼€å¯/å…³é—­å¾ªç¯è·³æ€(å…¨éƒ¨ç©å®¶)ã€",
    CurrentValue = false,
    Flag = "LoopBendyKillToggle",
    Callback = function(Value)
        if Value then
            TaskManager.StartTask("bendyAll", function()
                while TaskManager.activeTasks["bendyAll"] do
                    task.wait()
                    for _, player in ipairs(Players:GetPlayers()) do
                        Utils.SafeFireRemote({"PlayerRemoteEvents", "Bendy", "BendyAbility"}, {player})
                    end
                end
            end)
        else
            TaskManager.StopTask("bendyAll")
        end
    end
})

-- é‡ç½®åŠŸèƒ½
CombatTab:CreateSection("é‡ç½®")

local resetDropdown = PlayerSelector.CreateDropdown(CombatTab, "é€‰æ‹©é‡ç½®ç›®æ ‡ç©å®¶", "ResetTargetDropdown", function(Options)
    PlayerSelector.targets.reset = Players:FindFirstChild(Options[1])
end)

CombatTab:CreateButton({
    Name = "é€‰ä¸­ç©å®¶é‡ç½®(è‡ªå·±ä¹Ÿä¼šè¢«é‡ç½®)",
    Callback = function()
        local target = PlayerSelector.targets.reset
        if not target then
            warn("[ç»´åº¦èåˆ] è¯·å…ˆä»ä¸‹æ‹‰æ¡†é€‰æ‹©é‡ç½®ç›®æ ‡ï¼")
            return
        end

        local playersToReset = {LocalPlayer, target}
        for _, player in ipairs(playersToReset) do
            if player and player.Character then
                Utils.SafeFireRemote({"PlayerRemoteEvents", "HomingAttack"}, {player.Character})
            end
        end
    end
})

-- ==================== 3. ç”Ÿå­˜åŠŸèƒ½æ ‡ç­¾é¡µ ====================
local SurvivalTab = Window:CreateTab("ç”Ÿå­˜/è‡ªæ€", 4483362458)

-- æ— æ•ŒåŠŸèƒ½
SurvivalTab:CreateSection("è‡ªä¿")
SurvivalTab:CreateToggle({
    Name = "ã€å¼€å¯/å…³é—­æ— æ•Œã€",
    CurrentValue = false,
    Flag = "InvincibleToggle",
    Callback = function(Value)
        if Value then
            TaskManager.StartTask("invincible", function()
                while TaskManager.activeTasks["invincible"] do
                    task.wait(0.9)
                    Utils.SafeFireRemote({"Remotes", "Iframe"}, {1})
                end
            end)
        else
            TaskManager.StopTask("invincible")
        end
    end
})

-- æ²»ç–—åŠŸèƒ½
SurvivalTab:CreateSection("æ²»ç–—")

-- å…¨ä½“æ²»ç–—
SurvivalTab:CreateToggle({
    Name = "ã€å¼€å¯/å…³é—­æ— é™æ²»ç–—ï¼ˆå…¨ä½“ï¼‰ã€",
    CurrentValue = false,
    Flag = "HealAllToggle",
    Callback = function(Value)
        if Value then
            TaskManager.StartTask("healAll", function()
                while TaskManager.activeTasks["healAll"] do
                    task.wait()
                    for _, player in ipairs(Players:GetPlayers()) do
                        if player.Character then
                            Utils.SafeFireRemote({"PlayerRemoteEvents", "Frisk", "seaTea"}, {player.Character})
                        end
                    end
                end
            end)
        else
            TaskManager.StopTask("healAll")
        end
    end
})

-- é€‰äººæ²»ç–—
local healDropdown = PlayerSelector.CreateDropdown(SurvivalTab, "é€‰æ‹©æ²»ç–—ç›®æ ‡ç©å®¶", "HealTargetDropdown", function(Options)
    PlayerSelector.targets.heal = Players:FindFirstChild(Options[1])
end)

SurvivalTab:CreateToggle({
    Name = "ã€å¼€å¯/å…³é—­é€‰äººæ— é™æ²»ç–—ã€",
    CurrentValue = false,
    Flag = "TargetHealToggle",
    Callback = function(Value)
        if Value then
            local target = PlayerSelector.targets.heal
            if not target then
                warn("[ç»´åº¦èåˆ] è¯·å…ˆä»ä¸‹æ‹‰æ¡†é€‰æ‹©æ²»ç–—ç›®æ ‡ï¼")
                return
            end
            
            TaskManager.StartTask("targetHeal", function()
                while TaskManager.activeTasks["targetHeal"] and target and target:IsDescendantOf(Players) do
                    task.wait()
                    if target.Character then
                        Utils.SafeFireRemote({"PlayerRemoteEvents", "Frisk", "seaTea"}, {target.Character})
                    end
                end
                TaskManager.StopTask("targetHeal")
            end)
        else
            TaskManager.StopTask("targetHeal")
        end
    end
})

-- ==================== 4. å¢ç›ŠåŠŸèƒ½æ ‡ç­¾é¡µ ====================
local BuffTab = Window:CreateTab("å¢ç›Šé‡ç½®", 4483362458)

-- ç¦buff
BuffTab:CreateSection("ç¦")

local buffDropdown = PlayerSelector.CreateDropdown(BuffTab, "é€‰æ‹©ç¦buffç›®æ ‡ç©å®¶", "BlessTargetDropdown", function(Options)
    PlayerSelector.targets.buff = Players:FindFirstChild(Options[1])
end)

BuffTab:CreateToggle({
    Name = "ã€å¼€å¯/å…³é—­å¾ªç¯ç»™äºˆç¦buffï¼ˆç›®æ ‡ç©å®¶ï¼‰ã€",
    CurrentValue = false,
    Flag = "TargetBlessToggle",
    Callback = function(Value)
        if Value then
            local target = PlayerSelector.targets.buff
            if not target then
                warn("[ç»´åº¦èåˆ] è¯·å…ˆä»ä¸‹æ‹‰æ¡†é€‰æ‹©ç›®æ ‡ï¼")
                return
            end
            
            TaskManager.StartTask("targetBuff", function()
                while TaskManager.activeTasks["targetBuff"] and target and target:IsDescendantOf(Players) do
                    task.wait(1)
                    if target.Character then
                        Utils.SafeFireRemote({"PlayerRemoteEvents", "Frisk", "giveBuff"}, {target.Character})
                    end
                end
                TaskManager.StopTask("targetBuff")
            end)
        else
            TaskManager.StopTask("targetBuff")
        end
    end
})

-- å…¨ä½“ç¦buff
BuffTab:CreateButton({
    Name = "ç¦buffï¼ˆå…¨ä½“ï¼‰",
    Callback = function()
        for _, player in ipairs(Players:GetPlayers()) do
            if player.Character then
                Utils.SafeFireRemote({"PlayerRemoteEvents", "Frisk", "giveBuff"}, {player.Character})
            end
        end
        print("[ç»´åº¦èåˆ] å…¨ä½“ç¦buffå‘æ”¾å®Œæˆ")
    end
})

-- ==================== 5. è§’è‰²é€‰æ‹©æ ‡ç­¾é¡µ ====================
local CharacterTab = Window:CreateTab("è§’è‰²é€‰æ‹©", 4483362458)

local selectedCharacter = "bendy"

-- è§’è‰²åˆ‡æ¢
local charDropdown = CharacterTab:CreateDropdown({
    Name = "é€‰æ‹©è§’è‰²ï¼ˆåˆ‡æ¢ç”¨ï¼‰",
    Options = {
        "bendy", "sonic", "eggman", "sans", "monika",
        "mugman", "sayori", "vanilla", "cuphead", "cream",
        "frisk", "boris", "vortex"
    },
    CurrentOption = "bendy",
    MultipleOptions = false,
    Flag = "CharacterSelectDropdown",
    Callback = function(Options)
        selectedCharacter = Options[1]
    end
})

CharacterTab:CreateButton({
    Name = "ç¡®è®¤åˆ‡æ¢è§’è‰²",
    Callback = function()
        Utils.SafeFireRemote({"Remotes", "inSelection", "characterSelectionControlEvent"}, {selectedCharacter})
        print("[ç»´åº¦èåˆ] å·²åˆ‡æ¢è‡³è§’è‰²ï¼š" .. selectedCharacter)
    end
})

-- ==================== 6. è§’è‰²æŠ€èƒ½æ ‡ç­¾é¡µ ====================
local AbilityTab = Window:CreateTab("è§’è‰²æŠ€èƒ½", 4483362458)

-- å‹‡æ°”çµé­‚ç‰¹æ•ˆ
AbilityTab:CreateSection("ç‰¹æ•ˆ")
AbilityTab:CreateToggle({
    Name = "ã€å¼€å¯/å…³é—­å‹‡æ°”çµé­‚ç‰¹æ•ˆã€",
    CurrentValue = false,
    Flag = "BraverySoulToggle",
    Callback = function(Value)
        if Value then
            TaskManager.StartTask("braverySoul", function()
                while TaskManager.activeTasks["braverySoul"] do
                    task.wait(0.5)
                    Utils.SafeFireRemote({"PlayerRemoteEvents", "abilityEffect"})
                end
            end)
        else
            TaskManager.StopTask("braverySoul")
        end
    end
})

-- ==================== 7. é¢æ¿æ§åˆ¶æ ‡ç­¾é¡µ ====================
local ControlTab = Window:CreateTab("é¢æ¿æ§åˆ¶", 4483362458)

-- åˆå§‹åŒ–ç©å®¶é€‰æ‹©å™¨è·Ÿè¸ª
PlayerSelector.SetupPlayerTracking({
    teleportDropdown, singleDamageDropdown, killDropdown, 
    resetDropdown, healDropdown, buffDropdown
})

ControlTab:CreateButton({
    Name = "å…³é—­é¢æ¿ï¼ˆæ¸…ç†æ‰€æœ‰åŠŸèƒ½ï¼‰",
    Callback = function()
        print("[ç»´åº¦èåˆ] æ­£åœ¨å…³é—­é¢æ¿ï¼Œæ¸…ç†æ‰€æœ‰ä»»åŠ¡...")
        TaskManager.StopAllTasks()
        Rayfield:Destroy()
    end
})

ControlTab:CreateParagraph({
    Title = "ç³»ç»ŸçŠ¶æ€",
    Content = "âœ… æ‰€æœ‰åŠŸèƒ½å·²ä¼˜åŒ–åŠ è½½\nğŸ”„ ä»»åŠ¡ç®¡ç†å™¨è¿è¡Œä¸­\nğŸ¯ ç©å®¶é€‰æ‹©å™¨å·²å¯ç”¨"
})

-- æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
print("âœ… ç»´åº¦èåˆ 1.0 (ä¼˜åŒ–ç‰ˆ) åŠ è½½å®Œæˆï¼")
print("ğŸ¯ åŠŸèƒ½ç‰¹ç‚¹ï¼š")
print("   â€¢ æ¨¡å—åŒ–ä»£ç ç»“æ„")
print("   â€¢ ç»Ÿä¸€çš„ä»»åŠ¡ç®¡ç†")
print("   â€¢ å®‰å…¨çš„è¿œç¨‹è°ƒç”¨")
print("   â€¢ è‡ªåŠ¨ç©å®¶è·Ÿè¸ª")
